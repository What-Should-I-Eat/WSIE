<!DOCTYPE html>
<html>

<head>
    <title>Profile</title>
    <script type="text/javascript" src="./processingAlgorithms/currentUser.js"></script>
    <script type="text/javascript" src="./processingAlgorithms/profile.js"></script>
    <script type="text/javascript" src="./processingAlgorithms/edamam.js"></script>
    <script type="text/javascript" src="./processingAlgorithms/login.js"></script>
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

    <header>
        <h1>What Should I Eat?</h1>
        <nav class="nav-header">
          <ul>
            <li><a href="test.html" id="test">Search</a></li>
            <li><a href="favorites.html" id="favorites">Favorites</a></li>
            <li><a href="profile.html" id="profile">Profile</a></li>
            <li><a href="login.html" id="search">Logout</a></li>
          </ul>
        </nav>
      </header>

    <div>
        <h2 id="user-identification"></h2>
    </div>

    <div id="user-diet" class="diet-container">
        <table>
            <tr>
                <th>Diets</th>
            </tr>
            <tr>
                <td>
                    <button class="lowcarb-button">Low Carb</button>
                    <button class="lowfat-button">Low Fat</button>
                    <button class="lowsodium-button">Low Sodium</button>
                    <button class="lowsugar-button">Low Sugar</button>
                </td>
            </tr>
            <tr>
                <td>
                    <button class="alcoholfree-button">Alcohol Free</button>
                    <button class="balanced-button">Balanced</button>
                    <button class="highfiber-button">High Fiber</button>
                    <button class="highprotein-button">High Protein</button>
                </td>
            </tr>
        </table>
    </div>
    <div id="user-health-1" class="health-container-1">
        <table>
            <tr>
                <td>
                    <button class="vegan-button">Vegan</button>
                    <button class="vegetarian-button">Vegetarian</button>
                    <button class="paleo-button">Paleo</button>
                    <button class="fodmap-button">Low FODMAP</button>
                </td>
            </tr>
            <tr>
                <td>
                    <button class="gf-button">Gluten Free</button>
                    <button class="keto-button">Keto</button>
                    <button class="kosher-button">Kosher</button>
                    <button class="pork-button">Pork Free</button>
                </td>
            </tr>
            <tr>
                <td>
                    <button class="pescatarian-button">Pescatarian</button>
                    <button class="red-meat-button">Red Meat Free</button>
                </td>
            </tr>
        </table>
    </div>

    <div id="user-health" class="health-container-2">
        <table>
            <tr>
                <th>Food Allergies</th>
            </tr>
                <tr>
                    <td>
                        <button class="gluten-button">Gluten</button>
                        <button class="dairy-button">Dairy</button>
                        <button class="eggs-button">Eggs</button>
                        <button class="soy-button">Soy</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="wheat-button">Wheat</button>
                        <button class="fish-button">Fish</button>
                        <button class="shellfish-button">Shellfish</button>
                        <button class="treenuts-button">Tree Nuts</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="peanuts-button">Peanuts</button>
                        <button class="sesame-button">Sesame</button>
                    </td>
                </tr>
        </table>
    </div>
    <br><br><br>
    <div class="submit-restrictions">
        <form onsubmit="return restrictionsHandler.submitRestrictions(event)">
            <button id="submitButton" onsubmit="">Submit Dietary Profile Changes</button>
        </form> 
    </div>

    <br><br><br><br><br>
    <footer>
    </footer>

    <script>
        function getUserName(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }
        const username = getUserName('name');

        const userIdentification = document.getElementById('user-identification');
        userIdentification.textContent = username ? `${username}'s Dietary Profile` : 'User Profile';

        document.addEventListener('DOMContentLoaded', () => {
            restrictionsHandler.handleRestrictions();
            
            document.getElementById('search').href = "login.html";
            document.getElementById('test').href = `test.html?name=${username}`;
            document.getElementById('favorites').href = `favorites.html?name=${username}`;
            document.getElementById('profile').href = `profile.html?name=${username}`;
        });
    </script>

</body>

</html>
